# 終業報告　9月15日（水）
## 本番環境を意識したJenkinsの設定　+　ビルド成功時に成果物を作成する
### 概要
今更ながら、Jenkinsの開発環境で準備した内容をアウトプットします。  
docker-composeでコンテナを立ち上げ、Jenkinsのスタンドアップ、ソースリポジトリの作成は行っているものとします。  
以下使用ツールです。  
* JDK（Oracle JDK 8 Update 131）  
自分の中でJDKはJavaのプログラムを作る、動作させるときの環境を示しているものだと思っています。  
違っていたら教えていただきたい！
* Maven（Apache Maven 3.5.0）  
ビルドツールです。自分の中でのビルドツールの認識としては、ソースコードから実際に動くプログラムを作り出してくれるものです。  
こちらも正しい知識をお持ちの方がいればぜひ！
* その他  
Junit,JaCoCo,Checkstyle,Findbugs（CheckstyleとFindbugsに関してはプラグインの配布が終わっていたので、どうするか検討しています。）  

### 内容
まずJDK,ビルドツール等のインストールしていきます。言い忘れましたが、実はJenkins内で必要なツールのインストールは全てできます。  
「っすんごい」
![Imgur](https://i.imgur.com/MEQ5P6A.png)  
<br>
<br>
![Imgur](https://i.imgur.com/79sZAAG.png)  
<br>
<br>
名前をテキトウにつけて、バージョンを指定しています。JDKのみOracleのアカウントが必須の様です。
![Imgur](https://i.imgur.com/VrC304M.png)  
<br>
<br>
![Imgur](https://i.imgur.com/D7FgwS7.png)  
<br>
<br>
次にプラグインをインストールしますが、時間ものないので説明を割愛します。  
![Imgur](https://i.imgur.com/YMbgNGE.png)  
<br>
<br>
ジョブの設定を変えていきます。  
![Imgur](https://i.imgur.com/NwIia7C.png)  
![Imgur](https://i.imgur.com/M0DVDBO.png)
<br>
<br>
前回の設定に加えて、ビルド手順の追加で「Mavenの呼び出し」を選んでビルドツールを使用します。  
加えて、ビルド後の処理で「成果物の保存」を選択して、適当なファイル名を入力します。  
![Imgur](https://i.imgur.com/spWE6mO.png)  
これで設定は以上なのでビルドをしていきます。  
<br>
<br>
![Imgur](https://i.imgur.com/HcCYd5V.png)  
ビルドの実行を押して,実行履歴からビルドが実行されているのを確認します。  
成果物が作成されているのでzipファイルとしてダウンロードします。  
<br>
<br>
![Imgur](https://i.imgur.com/6uF1tie.png)  
こんな形で成果物として残してくれた様ですが、jenkins初心者の自分からしたら何が作られたのかさっぱりです。  
これで以上になります。  
<br>
<br>
<br>
<br>
<br>
<br>
## 昨日のやりかけだった作業の続き
### 概要
JUnitを使ってのテスト集計  
昨日エラーが出てしまったため作業を中断していました。  
原因が分かったので作業を再開します。

### 内容
昨日はビルドしてテストが失敗したところで終了しました。  
今日は一から作業再開していきます。  
<br>
<br>
まず、ジョブの設定でビルド後の処理をしていきます。  
「JUnitテスト結果の集計」を選び.保存するxmlファイルを指定します。
![Imgur](https://i.imgur.com/JnTr7So.png)  
<br>
<br>
前回はビルドツールであるMavenの使用うまくできていませんでした。（バージョンも違っていた）  
設定を正しくすることで、テスト結果の推移が出ます。  
![Imgur](https://i.imgur.com/9NbllLm.png)  
ただビルド実行をしてビルド履歴を見ると、テストが失敗しています。  
本書に従ってソースコードの記述を一部分だけ変更します。  
<br>
<br>
![Imgur](https://i.imgur.com/lTOt75Q.png)  
「Ya・xtu・ta---」  
上手くいきました。  
推移を見るとビルド自体が失敗しているものは表示はされずに、テストが失敗している箇所と成功した箇所だけが表示されます。  
「Failed」がテストを失敗した箇所です。  
「Passed」がテストが成功した箇所です。今回の行ったビルドもテストまで成功している様です。  
<br>
<br>
テストした後は履歴として細かいところまで確認できます。  
![Imgur](https://i.imgur.com/7HPgY5x.png)
本書によるとこのテスト結果の集計ができる機能は、プロジェクトの開発状況を「可視化」するための機能だそうで、ビルドの結果はWebブラウザなどで、簡単にアクセスして誰でも確認できることが望ましいとか...。  
<br>
また、過去のビルド結果を保存しておき、時系列でビルドがどのように推移したか、グラフなどで出力できることが便利だとか...なんとか....。  
<br>
<br>
これで以上になります。
<br>
<br>
<br>
<br>
<br>
<br>

## etc...
